<div class="container page">
  <div class="breadcrumb-container content">
    placeholder for breadcrumbs
  </div>
  <div class="row">
    <div class="col-md-2 sidebar">
      <div class="picklist content">
        <a href="#projects?page={{page.pageNum}}&sort={{sort.id}}&category={{categoryId}}&product=" class=clear>x</a>
        <h1>Product</h1>
        <ul class="plainlist">
          <li ng-repeat="product in projectProducts" ng-class="{active:product._id == productId}"><a href="#projects?page={{page.pageNum}}&sort={{sort.id}}&category={{categoryId}}&product={{product._id}}">{{product.name}}</a></li>
        </ul>
      </div>
      <div class="picklist content">
        <a href="#projects?page={{page.pageNum}}&sort={{sort.id}}&category=&product={{productId}}" class=clear>x</a>
        <h1>Category</h1>
        <ul class="plainlist">
          <li ng-repeat="category in projectCategories" ng-class="{active:category._id == categoryId}"><a href="#projects?page={{page.pageNum}}&sort={{sort.id}}&category={{category._id}}&product={{productId}}">{{category.title}}</a></li>
        </ul>
      </div>


    </div>
    <div class="col-md-10">
      <div class="search-container content">
        Placeholder for search
      </div>
      <div class="results-container content">
        <div class="result-header">
          Showing {{projects.length}} of {{projectInfo.total}} results
          <div class="sorting">
            <label>Sort by: </label><select class="form-control" ng-change="applySort()" ng-model="sort" ng-options="item.name for item in sortOptions track by item.id"/>
          </div>
        </div>
        <ul class="project-list plainlist">
          <li ng-repeat="project in projects" id="{{project._id}}">
            <div class="col-md-9">
              <div class="thumb-container">
                <img src="api/projects/{{project._id}}/thumbnail"/>
              </div>
              <div class="project-summary">
                <a href="#projects/{{project._id}}">{{project.title}}</a>
                <a href="#users/{{project.userid._id}}">{{project.userid.username}}</a>
                <p>{{project.short_description}}</p>
              </div>
            </div>
            <div class="col-md-2">
              <ul class="stats plainlist">
                <li class="rating">
                  <span ng-show="!project.votenum || project.votenum==0">Not yet rated</span>
                  {{(Math.round(project.votetotal / project.votenum))}}
                  <span class="star" ng-repeat="star in stars track by $index" ng-if="getRating(project.votetotal, project.votenum)">â˜…</span>
                </li>
                <li><i>{{project.views}}</i> Views</li>
                <li><i>{{project.replycount}}</i> Comments</li>
                <li>Last Update: <i>{{project.last_updated | date:'dd MMM yy HH:mm'}}</i></li>
              </ul>
            </div>
            <div class="col-md-1">
              <ul class="plainlist moderation-list">
                <li class="icon flag medium" ng-if="userManager.canFlag('projects')" ng-click="flagProject(project)" ng-class="{flagged: project.flagged==true}"></li>
                <li class="icon approve medium" ng-if="(userManager.canApprove('projects') && project.approved==false) || (userManager.canHide('projects') && project.approved==false)" ng-click="approveProject(project)"></li>
                <li class="icon remove medium" ng-if="userManager.canHide('projects') && project.approved==true" ng-click="hideProject(project)"></li>
                <li class="icon delete medium" ng-if="userManager.canDelete('projects')" ng-click="deleteProject(project, $index)"></li>
              </ul>
            </div>
          </li>
        </ul>
        <button class="ghost-button grey center" ng-show="projects.length < projectInfo.total" ng-click="getMore()">more</button>
      </div>
    </div>
  </div>
</div>
